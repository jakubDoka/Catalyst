use {
    "root/structs"
    "root/generics"
}

fn "default" main() -> int {
    if other(1, 2, 3) != 7 {
        return 1
    }

    if bti(true) != 1 {
        return 2
    }

    if bti(false) != 0 {
        return 3
    }

    if fib(5) != 8 {
        return 4
    }

    if iter_fib(5) != 8 {
        return 5
    }

    {
        let mut i = 1
        let mut b = 0
        if loop { if i > 100 {
            break b
        } else {
            b += i
            i += 1
        } } != 5050 {
            return 6
        }
    }

    if structure_test() != 0 {
        return 7
    }

    if init_something().a != 0 {
        return 8
    }

    if move_in_and_out(0) != 0 {
        return 9
    }

    0
}

fn fib(x: int) -> int {
    if x < 2 {
        1
    } else {
        fib(x - 1) + fib(x - 2)
    }
}

fn iter_fib(x: int) -> int {
    let mut i = 1
    let mut a = 1
    let mut b = 1
    
    loop {
        if i >= x {
            break b
        }

        let c = a + b
        a = b
        b = c

        i += 1
    }
}

fn "default" printf(str: int) extern